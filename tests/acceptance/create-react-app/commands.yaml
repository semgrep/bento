target_repo: https://github.com/facebook/create-react-app
target_hash: 053f9774d3f592c17741d2a86de66a7ca58f90c0
steps:
  - name: install-project
    description: Project should be installed before bento run
    command:
      - yarn
      - install
  - name: noconfig
    description: bento check fails when no configuration file is found
    command:
      - bento
      - --agree
      - check
    expected_err:
      - "âœ˜ No Bento configuration found. Please run `bento init`."
    expected_out: ""
    returncode: 3
  - name: bento-init
    description: bento init detects python and install bandit and flake8
    command:
      - bento
      - --agree
      - init
    expected_err: |
      â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
      â”‚                             Bento Initialization                             â”‚
      â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
      Creating default ignore file at .bentoignoreâ€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤ðŸœ Setting up\b\b\b\b\b\b\b\b\b\b\b\bðŸ± Done
      Creating default configuration at .bento.ymlâ€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤â€¤ðŸœ Setting up\b\b\b\b\b\b\b\b\b\b\b\bðŸ± Done

      â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
      â”‚                            Project Identification                            â”‚
      â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

      Detected project with node-js (with jest)

      âš  Skipping project analysis due to noninteractive terminal.

      To use Bento:
        view archived results                    $ bento check --show-all
        check a specific path                    $ bento check [PATH]
        disable a check                          $ bento disable check [TOOL] [CHECK]
        get help about a command                 $ bento [COMMAND] --help

      â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
      â”‚                                  Thank You                                   â”‚
      â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
      Bento is initialized!

      Please add Bento to version control:

        $ git add .gitignore .bento?* && git commit -m 'Add Bento to project'

      Need help or want to share feedback? Reach out to us at support@r2c.dev or file
      an issue on GitHub. Weâ€™d love to hear from you!

      Join #bento in our community Slack for support, to talk with other users, and
      share feedback.

      From all of us at r2c, thank you for trying Bento! We canâ€™t wait to hear what
      you think.
    expected_out: []
    returncode: 0
  - name: bento-check-with-init
    description: bento check after init has findings
    command:
      - bento
      - --agree
      - check
    expected_err:
      - "âš  294 finding(s) in"
      - â—¦ To suppress all findings run `bento archive`.
    expected_out:
      file: bento-check-with-init.out
    returncode: 2
  - name: disable-finding
    description: try disabling a finding
    command:
      - bento
      - --agree
      - disable
      - check
      - r2c.eslint
      - no-use-before-define
    expected_err: "âœ” 'no-use-before-define' disabled for 'r2c.eslint'"
    expected_out: ""
    returncode: 0
  - name: bento-check-with-disable
    description: bento check should hide disabled finding
    command:
      - bento
      - --agree
      - check
    expected_err:
      - "âš  271 finding(s) in"
      - â—¦ To suppress all findings run `bento archive`.
    expected_out:
      file: bento-check-with-disable.out
    returncode: 2
  - name: reenable-check
    description: enable a finding that was previously disabled
    command:
      - bento
      - --agree
      - enable
      - check
      - r2c.eslint
      - no-use-before-define
    expected_err: "âœ” 'no-use-before-define' enabled for 'r2c.eslint'"
    expected_out: ""
    returncode: 0
  - name: bento-check-reenable
    description: bento check should show finding that was reenabled
    command:
      - bento
      - --agree
      - check
    expected_err:
      - "âš  294 finding(s) in"
      - â—¦ To suppress all findings run `bento archive`.
    expected_out:
      file: bento-check-with-init.out
    returncode: 2
  - name: bento-archive
    description: should archive all existing findings
    command:
      - bento
      - --agree
      - archive
    expected_err: |
      Project analyzed with 1 tools.
      294 findings were added to your archive as a baseline.
      Please check '.bento-whitelist.yml' in to source control.
    expected_out: ""
    returncode: 0
  - name: bento-check-with-archive
    description: should have no findings after archiving
    command:
      - bento
      - --agree
      - check
    expected_err:
      - "âœ” 0 findings in"
      - "Not showing 294 archived finding(s). To view, run `bento check --show-all`"
    expected_out: ""
    returncode: 0
  - name: install-hook
    description: should successfully install as a commit hook
    command:
      - bento
      - --agree
      - install-hook
    expected_err: "âœ” Added Bento to your git pre-commit hooks."
    expected_out: ""
    returncode: 0
  - name: twice-install-hook
    description: should detect pre-commit hook already installed
    command:
      - bento
      - --agree
      - install-hook
    expected_err: "âœ” Bento already installed as a pre-commit hook"
    expected_out: ""
    returncode: 0
  - name: add-findings
    descripton: add file with known findings
    command:
      - cp
      - __BENTO_REPO_ROOT__/tests/acceptance/bad.js
      - bad.js
    expected_err: ""
    expected_out: ""
    returncode: 0
  - name: git-add-findings
    description: add file with findings to staging
    command:
      - git
      - add
      - bad.js
    expected_err: ""
    expected_out: ""
    returncode: 0
  - name: git-commit
    description: should run bento as pre-commit hook
    command:
      - git
      - -c
      - user.name="placeholder"
      - -c
      - user.email="place@holder.com"
      - commit
    expected_err:
      - Running Bento checks...
      - "âš  1 finding(s) in"
      - |
        error: r2c.eslint.no-undef https://eslint.org/docs/rules/no-undef
             --> bad.js:1:1
              |
            1 |   x = "potato";
              |
              = note: 'x' is not defined.
    expected_out: ""
    returncode: 1
